<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unified Server Administrator</title>
    
    <!-- Fonts & Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Main CSS -->
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;utf8,
    %3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E
      %3Crect width='64' height='64' rx='12' fill='%23000000'/%3E
      %3Cpath fill='%23E6E6E6' d='M32 11.5c-1.4 2.1-2.9 4.6-3.6 7.3-.7 2.7 0 5.4.8 8.1-1.6-.7-3.2-1.4-4.8-2.0-2.3-1.0-5.3-.6-6.9 1.6-1.4 1.6.7 3.3 2.3 3.7 2.5.8 5 1.9 7.4 2.7-1.5 1.6-2.4 3.7-2.4 5.9 0 4.1 3.4 7.3 7.7 7.3s7.7-3.3 7.7-7.3c0-2.2-.9-4.3-2.4-5.9 2.4-.8 4.9-1.9 7.4-2.7 1.6-.4 3.7-2.1 2.3-3.7-1.6-2.2-4.6-2.6-6.9-1.6-1.6.6-3.2 1.3-4.8 2.0.8-2.7 1.5-5.4.8-8.1-.7-2.7-2.2-5.2-3.6-7.3z'/%3E
    %3C/svg%3E">
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <div class="header-left">
                    <div class="logo">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" width="32" height="32">
                            <rect width="64" height="64" rx="12" fill="#f5f5f5"/>
                            <defs>
                                <linearGradient id="logoGrad" x1="0" x2="0" y1="0" y2="1">
                                    <stop offset="0%" stop-color="#ffffff" stop-opacity="0.08"/>
                                    <stop offset="100%" stop-color="#000000" stop-opacity="0"/>
                                </linearGradient>
                            </defs>
                            <circle cx="32" cy="32" r="32" fill="url(#logoGrad)"/>
                            <path fill="#181717" d="M32 10c-1.8 2.8-3.8 6.2-4.6 9.8-.8 3.6 0 7.3.9 10.9-1.9-.9-3.9-1.9-5.8-2.7-2.8-1.3-6.5-.7-8.5 1.8-1.8 1.9.9 3.9 2.9 4.4 3 1 5.9 2.3 8.8 3.4-1.8 2-2.9 4.7-2.9 7.5 0 5.3 4.4 9.5 9.8 9.5s9.8-4.3 9.8-9.5c0-2.8-1-5.5-2.9-7.5 2.9-1.1 5.9-2.4 8.8-3.4 2-.5 4.8-2.5 2.9-4.4-2-2.5-5.7-3.1-8.5-1.8-1.9.8-3.9 1.8-5.8 2.7.9-3.6 1.7-7.3.9-10.9C35.8 16.2 33.8 12.8 32 10z"/>
                        </svg>
                        <span>Unified Server Admin</span>
                    </div>
                </div>
                
                <div class="header-right">
                    <div class="status-indicator">
                        <div class="status-dot" id="statusDot"></div>
                        <span id="statusText">Ready</span>
                    </div>
                    
                    <button class="btn btn-ghost" id="systemInfoBtn" title="System Information">
                        <i class="fas fa-info-circle"></i>
                    </button>
                    
                    <button class="btn btn-ghost" id="settingsBtn" title="Settings">
                        <i class="fas fa-cog"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="app-main">
            <!-- Quick Stats -->
            <section class="stats-section">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-server"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="totalServers">0</div>
                            <div class="stat-label">Total Servers</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-play-circle"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="runningServers">0</div>
                            <div class="stat-label">Running</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-code"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="phpServers">0</div>
                            <div class="stat-label">PHP Sites</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fab fa-node-js"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="nodeServers">0</div>
                            <div class="stat-label">Node.js</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Server Management -->
            <section class="management-section">
                <div class="section-header">
                    <h2><i class="fas fa-cogs"></i> Server Management</h2>
                    <div class="header-actions">
                        <button class="btn btn-secondary" id="refreshAllBtn">
                            <i class="fas fa-sync-alt"></i>
                            Refresh All
                        </button>
                        <button class="btn btn-primary" id="addServerBtn">
                            <i class="fas fa-plus"></i>
                            Add Server
                        </button>
                    </div>
                </div>

                <div class="management-panel">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="serverName">
                                <i class="fas fa-tag"></i>
                                Server Name
                            </label>
                            <input type="text" id="serverName" placeholder="my-website" required>
                        </div>

                        <div class="form-group">
                            <label for="serverType">
                                <i class="fas fa-code"></i>
                                Server Type
                            </label>
                            <select id="serverType">
                                <option value="Static">Static Files</option>
                                <option value="PHP">PHP (with php-fpm)</option>
                                <option value="Node.js">Node.js</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="serverPort">
                                <i class="fas fa-network-wired"></i>
                                Port
                            </label>
                            <input type="number" id="serverPort" value="8000" min="1000" max="65535" required>
                        </div>

                        <div class="form-group">
                            <label for="sitePath">
                                <i class="fas fa-folder"></i>
                                Site Path
                            </label>
                            <div class="input-group">
                                <input type="text" id="sitePath" placeholder="/path/to/website" required>
                                <button type="button" id="browsePathBtn" class="btn btn-outline">
                                    <i class="fas fa-folder-open"></i>
                                </button>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="domain">
                                <i class="fas fa-globe"></i>
                                Domain (Optional)
                            </label>
                            <input type="text" id="domain" placeholder="example.com">
                        </div>

                        <div class="form-group">
                            <button type="button" id="createServerBtn" class="btn btn-primary btn-large">
                                <i class="fas fa-plus"></i>
                                Create Server
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Servers List -->
            <section class="servers-section">
                <div class="section-header">
                    <h2><i class="fas fa-server"></i> Active Servers</h2>
                    <div class="server-count" id="serverCount">0 servers</div>
                </div>
                <div class="servers-container" id="serversContainer">
                    <div class="empty-state">
                        <i class="fas fa-server"></i>
                        <h3>No servers configured</h3>
                        <p>Create your first server to get started</p>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Server Log Modal -->
    <div id="logModal" class="modal" aria-hidden="true">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="logModalTitle"><i class="fas fa-file-alt"></i> Server Logs</h3>
                <div class="modal-actions">
                    <button id="refreshLogsBtn" class="btn btn-ghost" title="Refresh Logs">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                    <button id="copyLogsBtn" class="btn btn-ghost" title="Copy Logs">
                        <i class="fas fa-copy"></i>
                    </button>
                    <button class="btn btn-ghost close-modal" title="Close">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <div class="modal-body">
                <div class="log-container">
                    <div class="log-stream-badge" id="logLiveBadge" style="display:none;">
                        <span class="live-indicator"></span>
                        <span>Live</span>
                    </div>
                    <pre id="logContent">Loading logs...</pre>
                </div>
            </div>
        </div>
    </div>

    <!-- System Info Modal -->
    <div id="systemModal" class="modal" aria-hidden="true">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-info-circle"></i> System Information</h3>
                <button class="btn btn-ghost close-modal" title="Close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div id="systemInfoContent">Loading system information...</div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal" aria-hidden="true">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-cog"></i> Settings</h3>
                <button class="btn btn-ghost close-modal" title="Close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="settings-panel">
                    <div class="settings-section">
                        <h4>Server Configuration</h4>
                        <div class="settings-row">
                            <div class="setting-label">
                                <div class="title">Auto-refresh interval</div>
                                <div class="desc">How often to refresh server status (seconds)</div>
                            </div>
                            <div class="setting-control">
                                <input type="number" id="refreshInterval" value="2" min="1" max="60">
                            </div>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h4>Nginx Configuration</h4>
                        <div class="settings-row">
                            <div class="setting-label">
                                <div class="title">Nginx config directory</div>
                                <div class="desc">Directory for nginx configuration files</div>
                            </div>
                            <div class="setting-control">
                                <input type="text" id="nginxConfigDir" value="/etc/nginx/sites-available" readonly>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Container -->
    <div id="notificationContainer" class="notification-container"></div>

    <!-- App JavaScript -->
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>